<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.image.*?>
<?import javafx.scene.control.*?>
<?import com.bjgoodwill.hip.client.fx.control.table.*?>
<?import com.bjgoodwill.hip.client.fx.control.button.*?>
<?import com.bjgoodwill.hip.client.fx.control.form.cell.*?>
<?import java.lang.*?>
<?import com.bjgoodwill.hip.client.fx.control.form.cell.text.*?>
<?import javafx.scene.layout.*?>
<?import com.bjgoodwill.hip.client.fx.control.table.cell.*?>
<?import java.util.*?>
<?import com.bjgoodwill.hip.client.fx.control.form.*?>
<?import com.bjgoodwill.hip.client.fx.control.form.cell.choose.customdatasource.*?>
<?import com.bjgoodwill.hip.client.fx.control.form.cell.choose.ets.*?>
<?import com.bjgoodwill.hip.client.fx.control.choose.combobox.*?>
<?import com.bjgoodwill.hip.client.app.service.bed.cf.*?>
<?import com.bjgoodwill.hip.client.fx.control.form.cell.number.*?>
<?import com.bjgoodwill.hip.client.function.*?>
<BorderPane prefHeight="768.0" prefWidth="1024.0" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1">
    <top>
        <HBox alignment="CENTER_LEFT" prefHeight="34.0" prefWidth="1024.0">
            <children>
                <Label text="病区" />
                <HipFilterableComboBox fx:id="ipaId" prefHeight="25.0" prefWidth="154.0">
                </HipFilterableComboBox>
            </children>
        </HBox>
    </top>
    <center>
        <HipTableView fx:id= "bedTable" BorderPane.alignment="CENTER">
            <columns>
                <HipTableColumn prefWidth="150" propertyName="areaName" text="病区">
                    <tableCell>
                        <HipTableTextCell/>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn prefWidth="150" propertyName="orgName" text="科室">
                    <tableCell>
                        <HipTableTextCell/>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn prefWidth="150" propertyName="addrName" text="位置">
                    <tableCell>
                        <HipTableTextCell/>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn prefWidth="120" propertyName="servicePatCode" text="收费类别">
                    <tableCell>
                        <HipCustomDataSourceTableCell>
                            <customDataSourceCallback>
                                <BedTypeSourceCallback/>
                            </customDataSourceCallback>
                        </HipCustomDataSourceTableCell>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn prefWidth="120" propertyName="bedName" text="服务名称">
                    <tableCell>
                        <HipTableCell>
                        </HipTableCell>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn prefWidth="90" propertyName="no" text="床位序号">
                    <tableCell>
                        <HipTableCell>
                        </HipTableCell>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn prefWidth="90" propertyName="masterDoctor" text="责任医生">
                    <tableCell>
                        <HipCustomDataSourceTableCell>
                            <customDataSourceCallback>
                                <MasterStaffSourceCallback staffType="DOCTOR" />
                            </customDataSourceCallback>
                        </HipCustomDataSourceTableCell>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn prefWidth="90" propertyName="masterNurse" text="责任护士">
                    <tableCell>
                        <HipCustomDataSourceTableCell>
                            <customDataSourceCallback>
                                <MasterStaffSourceCallback staffType="NURSE" />
                            </customDataSourceCallback>
                        </HipCustomDataSourceTableCell>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn prefWidth="90" propertyName="isUse" text="床位状态">
                    <tableCell>
                        <HipEtsTableCell dictCode="BedState"/>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn editable="false" prefWidth="90" propertyName="approved" text="编制类型">
                    <tableCell>
                        <HipEtsTableCell dictCode="BedApprovedType"/>
                    </tableCell>
                </HipTableColumn>
                <HipTableColumn editable="false" prefWidth="150.0" text="操作">
                    <tableCell>
                        <HipTableButtonCell>
                            <buttonList>
                                <ArrayList>
                                    <HipButton text="删除" onAction="#deleteBed">
                                    </HipButton>
                                </ArrayList>
                            </buttonList> 
                        </HipTableButtonCell> 
                    </tableCell>
                </HipTableColumn>
            </columns>
        </HipTableView>
    </center>
    <bottom>
        <VBox BorderPane.alignment="CENTER"  prefHeight="300.0">
            <children>
                <HBox alignment="CENTER_LEFT" prefHeight="34.0" styleClass="control-bar-pane">
                    <children>
                        <HipButton styleClass="add-button" text="新增" onAction="#addBed">
                            <graphic>
                                <ImageView pickOnBounds="true" preserveRatio="true" />
                            </graphic>
                        </HipButton>
                        <HipButton styleClass="save-button" text="保存" onAction="#saveBed">
                            <graphic>
                                <ImageView pickOnBounds="true" preserveRatio="true" />
                            </graphic>
                        </HipButton>
                        <!--                        <HipButton styleClass="save-button" text="连续保存" onAction="#continuousSaveBed">
                            <graphic>
                                <ImageView pickOnBounds="true" preserveRatio="true" />
                            </graphic>
                        </HipButton>-->
                    </children>
                </HBox>
                <HipFormView  fx:id= "bedForm" hgap="15.0"  prefHeight="131.0" prefWidth="649.0" vgap="12.0">
                    <columnConstraints>
                        <ColumnConstraints />
                        <ColumnConstraints />
                        <ColumnConstraints />
                        <ColumnConstraints />
                        <ColumnConstraints />
                        <ColumnConstraints />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints minHeight="30.0" />
                        <RowConstraints minHeight="30.0" />
                        <RowConstraints minHeight="30.0" />
                    </rowConstraints>
                    <children>
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="病      区:" />
                        <HipCustomDataSourceFilterableComboBoxFormCell fx:id = "inpatientAreaId" propertyName="areaCode" prefWidth="160.0" GridPane.columnIndex="1">
                            <customDataSourceCallback>
                                <HipCallback beanId="ipaSourceCallback"/>
                            </customDataSourceCallback>
                        </HipCustomDataSourceFilterableComboBoxFormCell>
                        
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="科      室:" GridPane.columnIndex="2" />
                        <HipCustomDataSourceFilterableComboBoxFormCell fx:id = "orgId" propertyName="orgCode"  prefWidth="160.0" GridPane.columnIndex="3">
                            <customDataSourceCallback>
                                <OrgTreeSourceCallback/>
                            </customDataSourceCallback>
                            <commitConsumer>
                                <SetOrgNameConsumer/>
                            </commitConsumer>
                        </HipCustomDataSourceFilterableComboBoxFormCell>
                        
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="位      置:" GridPane.columnIndex="4" />
                        <HipCascadeFieldFormCell propertyName="addrCode"  textPropertyName="localeName" valuePropertyName="localeCode" prefWidth="160.0" GridPane.columnIndex="5">
                            <customDataSourceCallback>
                                <HipCallback beanId="sdlocTreeSourceCallback"/>
                            </customDataSourceCallback>
                            <commitConsumer>
                                <HipConsumer beanId="setSdlocNameConsumer"/>
                            </commitConsumer>
                        </HipCascadeFieldFormCell>
                        
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="收费类别:" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                        <HipCustomDataSourceFilterableComboBoxFormCell propertyName="servicePatCode" prefWidth="160.0" GridPane.columnIndex="3" GridPane.rowIndex="1">
                            <customDataSourceCallback>
                                <BedTypeSourceCallback/>
                            </customDataSourceCallback>
                        </HipCustomDataSourceFilterableComboBoxFormCell>
                        
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="服务名称:" GridPane.rowIndex="1" />
                        <HipTextInputFormCell  id ="bedName" propertyName="bedName" prefWidth="160.0" GridPane.columnIndex="1" GridPane.rowIndex="1">
                        </HipTextInputFormCell>
                        
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="编制类型:" GridPane.columnIndex="4" GridPane.rowIndex="1" />
                        <HipEtsFilterableComboBoxFormCell propertyName="approved" dictCode="BedApprovedType" prefWidth="160.0" GridPane.columnIndex="5" GridPane.rowIndex="1">
                        </HipEtsFilterableComboBoxFormCell>
                        
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="责任医生:" GridPane.rowIndex="2" />
                        <HipCustomDataSourceFilterableComboBoxFormCell id ="masterDoctor" propertyName="masterDoctor" prefWidth="160.0" promptText="" GridPane.columnIndex="1" GridPane.rowIndex="2">
                            <customDataSourceCallback>
                                <MasterStaffSourceCallback staffType="DOCTOR" />
                            </customDataSourceCallback>
                        </HipCustomDataSourceFilterableComboBoxFormCell>
                        
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="责任护士:" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                        <HipCustomDataSourceFilterableComboBoxFormCell  id="masterNurse" propertyName="masterNurse" prefWidth="160.0" GridPane.columnIndex="3" GridPane.rowIndex="2">
                            <customDataSourceCallback>
                                <MasterStaffSourceCallback staffType="NURSE" />
                            </customDataSourceCallback>
                        </HipCustomDataSourceFilterableComboBoxFormCell>
                        
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="患者类型:" GridPane.columnIndex="4" GridPane.rowIndex="2" />
                        <HipEtsFilterableComboBoxFormCell propertyName="bedType" dictCode="BedType" prefWidth="160.0" GridPane.columnIndex="5" GridPane.rowIndex="2">
                        </HipEtsFilterableComboBoxFormCell>
                        
                        <Label alignment="CENTER_RIGHT" prefWidth="80.0" text="床位序号:"  GridPane.rowIndex="3" />
                        <HipNumberFormCell  id ="bedNo" propertyName="no" prefWidth="160.0" GridPane.columnIndex="1" GridPane.rowIndex="3">
                        </HipNumberFormCell>
                    </children>
                </HipFormView>
            </children>
        </VBox>
    </bottom>
</BorderPane>
